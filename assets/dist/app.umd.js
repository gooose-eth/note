(function(u,h){typeof exports=="object"&&typeof module!="undefined"?module.exports=h():typeof define=="function"&&define.amd?define(h):(u=typeof globalThis!="undefined"?globalThis:u||self,u.App=h())})(this,function(){"use strict";function u(i,n){n=Object.assign({},{text:"",waitChar:"-",charSpeed:1,moveFix:25,moveRange:10,moveTrigger:25,fps:60,pattern:"abcdefghijklmnopqrstuvwxyz0123456789-_!@#$%^&*()+~<>",randomTextType:null,callback:null},n),n.text=n.text.trim();let l=[],r,t,o,e,c=!1;function a(){let d=o;e=!0;for(let s=t;s<=r;s++){if(l[s]!==0&&l[s]!=null){e=!1;const f=l[s];if(Math.abs(f)<=n.moveTrigger){let g="";switch(n.randomTextType){case"pattern":g=m(n.pattern);break;case"unicode":default:const b=Math.min(Math.max(n.text.charCodeAt(s)+f,33),126);g=String.fromCharCode(b);break}d+=g}else d+=n.waitChar;f>0?l[s]-=1:l[s]+=1}else t===s-1&&(t=s,o=n.text.substring(0,t)),d+=n.text.charAt(s);i.textContent=d}r<=n.text.length?r+=n.charSpeed:c=!0,e&&c&&(i.dataset.id&&clearInterval(parseInt(i.dataset.id)),i.textContent=o,i.dataset.run="false",n.callback&&n.callback())}function m(d){const s=Math.floor(Math.random()*d.length);return d.substring(s,s+1)}if(n.text&&i.dataset.run!=="true"){i.dataset.run="true",i.textContent=n.waitChar;for(let s=0;s<=n.text.length-1;s++)n.text.charAt(0)!==" "?l[s]=(n.moveFix+Math.round(Math.random()*n.moveRange))*(Math.round(Math.random())-.5)*2:l[s]=0;r=0,t=0,o="",clearInterval(parseInt(i.dataset.id));const d=setInterval(a,1e3/n.fps);i.dataset.id=d.toString()}}function h(i=null,n="get",l=null,r=null){return new Promise(function(t,o){i||o("not found url");let e=new XMLHttpRequest;if(e.onreadystatechange=function(){if(this.readyState===4&&this.status===200)try{t(JSON.parse(this.responseText))}catch{o("parse error")}},e.open(n.toUpperCase(),i,!0),r){const c=Object.keys(r);for(let a=0;a<c.length;a++)e.setRequestHeader(c[a],r[c[a]])}e.send()})}function v(){const i="lightbox",n="popup-lightbox";this.$body=null;function l(r,t){const o=document.createElement("template");let e=`<div id="${i}" class="lightbox">`;return e+='<figure class="lightbox__body">',e+=`<img src="${r}" alt="${t}"/>`,e+="</figure>",e+="</div>",e=e.trim(),o.innerHTML=e,o.content.firstChild}this.open=function(r,t){this.$body&&(this.$body.remove(),this.$body=null),this.$body=l(r,t),this.$body.addEventListener("click",()=>this.close()),document.body.appendChild(this.$body),document.querySelector("html").classList.add(n)},this.close=function(){!this.$body||(this.$body.remove(),this.$body=null,document.querySelector("html").classList.remove(n))}}var y="";class p{constructor(){this.initialHeaderEvents()}initialHeaderEvents(){this.headerElements={navigation:document.getElementById("headerNavigation"),search:document.getElementById("headerSearch"),searchForm:document.getElementById("search_keyword")};const n=this,l=this.headerElements.navigation.children[0],r=this.headerElements.search.children[0];l.addEventListener("click",function(e){n.headerElements.search.classList.remove("active"),e.currentTarget.parentNode.classList.toggle("active"),e.currentTarget.parentNode.querySelector(".dropdown-content").classList.toggle("active")}),r.addEventListener("click",function(e){n.headerElements.navigation.classList.remove("active"),e.currentTarget.parentNode.classList.toggle("active"),e.currentTarget.parentNode.querySelector(".dropdown-content").classList.toggle("active"),e.currentTarget.parentNode.classList.contains("active")&&e.currentTarget.parentNode.querySelector("input[type=text]").focus()});const t=this.headerElements.searchForm.q;t.value.length&&(t.parentNode.classList.add("is-word"),r.parentNode.classList.add("active-bg")),t.addEventListener("keyup",function(e){t.value.length?(t.parentNode.classList.add("is-word"),r.parentNode.classList.add("active-bg")):(t.parentNode.classList.remove("is-word"),r.parentNode.classList.remove("active-bg"))}),this.headerElements.searchForm.querySelector("button[type=reset]").addEventListener("click",function(e){e.preventDefault(),t.value="",t.parentNode.classList.remove("is-word"),r.parentNode.classList.remove("active-bg"),t.focus()}),window.addEventListener("click",function(e){if(!e.target.matches(".dropdown-button")){if(e.target.closest(".dropdown-content"))return;const c=document.getElementsByClassName("dropdown-content");for(let a=0;a<c.length;a++){let m=c[a];m.classList.contains("active")&&(m.parentNode.classList.remove("active"),m.classList.remove("active"))}}})}initialArticle(){this.articleElements={main:document.getElementById("article"),content:document.getElementById("article_content"),buttonLike:document.getElementById("button_like")},this.articleElements.buttonLike.addEventListener("click",r=>{const t=r.currentTarget;let o=parseInt(t.dataset.srl);t.setAttribute("disabled",!0),t.classList.add("on");let e=t.querySelector("em"),c=parseInt(e.textContent);e.innerHTML=String(c+1),h(`/on-like/${o}/`,"post",null).then(a=>{if(!a.success)throw new Error;e.innerHTML=String(a.star)}).catch(a=>{alert("Failed update like"),t.removeAttribute("disabled"),t.classList.remove("on"),e.innerHTML=String(c)})});const n=new v;this.articleElements.content.querySelectorAll("img").forEach(r=>{r.addEventListener("click",t=>{!t.target.src||n.open(t.target.src,t.target.name)})})}initialArticles(){document.querySelectorAll(".index-article__wrap").forEach(l=>{l.addEventListener("mouseenter",r=>{if(window.innerWidth<768)return!0;const t=".index-article__body";r.target.querySelectorAll(`${t} > strong, ${t} > p > span:first-child, ${t} > p > span:nth-child(2) > em`).forEach((e,c)=>{let a=0;switch(c){case 0:a=0;break;case 1:a=120;break;case 2:a=180;break;case 3:a=180;break}setTimeout(()=>u(e,{text:e.innerText,pattern:"abcdefghijklmnopqrstuvwxyz0123456789-_!@#$%^&*()+~<>\u3131\u3134\u3137\u3139\u3141\u3142\u3145\u3147\u3148\u314A\u314B\u314C\u314D\u314E\u3132\u3138\u3143\u3146\u3149",randomTextType:c===0?"pattern":"unicode"}),a)})})})}}return p});
